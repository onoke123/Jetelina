<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
	<link rel="stylesheet" href="jetelina/css/dashboard.css">
	<link rel="stylesheet" href="jetelina/css/tablelist.css">
	<link rel="stylesheet" href="css/datatables/datatables.min.css">

	<script type="text/javascript" src="js/genie/jquery.min.js"></script>
	<script type="text/javascript" src="js/jquery-ui-1.13.2/jquery-ui.min.js"></script>
	<script type="text/javascript" src="js/plotly-2.26.0.min.js" charset="utf-8"></script>
	<script type="text/javascript" src="js/datatables/datatables.min.js"></script>

	<link rel="icon" href="jetelina/img/jetelina.ico">
	<title>Jetelina</title>
</head>

<body>
	<div id="thxfavicon">
		<text style="color:lightgreen">thank you for the favicon by </text><a href="https://www.freepik.com/"
			target="_blank" rel="noreferrer noopener">freepik</a>
	</div>
	<!--
		Jetelina initialize page. only one time using, maybe. :)
	-->
	<div id="initialize" style="left:20%;top:20%;" class="functionpanel-parts commonpanel box_text initializepanel"
		hidden>
		<div name="initialalert" class="initial_alert_text"></div>
		<pre>
			Welcome to Jetelina.
			
			You dive into the new web development world. I bet this provide you incredible comfortable environment.
			Let's start to use ME.
			
			The first of all, please select my primary database that is contained our user profile. 
			Your data is available to store whichever, but 'user table' should be determined which.

			<input type="radio" name="primarydb" value="postgresql">PostgreSQL</input>
			<input type="radio" name="primarydb" value="mysql">MySql</input>


			<div name="params4postgres" hidden>
				<span>PostgreSQL connection parameters. The defaults are my guess. :)</span><br>
				　　host:　<input type="text" name="pg_host" value="localhost">
				　　port:　<input type="text" name="pg_port" value="5432">
				　　user:　<input type="text" name="pg_user">
				password:　<input type="text" name="pg_password">
				　dbname:　<input type="text" name="pg_dbname" value="postgres">
			</div>
			<div name="params4mysql" hidden>
				<span>MySQL connection parameters. The defaults are my guess. :)</span><br>
				　　host:　<input type="text" name="my_host" value="localhost">
				　　port:　<input type="text" name="my_port" value="3306">
				　　user:　<input type="text" name="my_user">
				password:　<input type="text" name="my_password">
				　dbname:　<input type="text" name="my_dbname" value="mysql">
				unix_socket:　<input type="text" name="my_unix_socket" value="/var/run/mysqld/mysqld.sock">
			</div>
			<div name="firstusers" hidden>
				<span>Original 10 Users: type alike 'Jhon Ron'. This name is to be login account.</span><br>
				1:<input type="text" name="pu1" value="Jhon Ron">
				2:<input type="text" name="pu2">
				3:<input type="text" name="pu3">
				4:<input type="text" name="pu4">
				5:<input type="text" name="pu5">
				6:<input type="text" name="pu6">
				7:<input type="text" name="pu7">
				8:<input type="text" name="pu8">
				9:<input type="text" name="pu9">
				10:<input type="text" name="pu10">
			</div>
			<div>
				<button name="paramsetbutton" hidden>SET & Try to connect</button>
				<button name="userregbutton" hidden>Register Users</button>
				<button name="gologinbutton" hidden>GO LOGOIN</button>
				<button name="cancelbutton" hidden>CANCEL</button>
			</div>
			<div name="message" class="box_text">
			</div>
	</pre>
	</div>
	<!-- 
			function panel
	-->
	<div id="function_panel" class="functionpanel-parts commonpanel squarepanel" hidden>
		<div id="fileup" style="width:15%;height:2%;" class="functionpanel-parts commonpanel squarepanel">
			<form id="my_form">
				<!-- caution:
                    should change the parameter of 'name' in FileUploadController.jl
                    if it's changed to other. 
                -->
				<label name="filelabel">
					<input type="file" name="upfile" style="display: none;" accept=".csv,.json"><span
						style="font-size: 14px;">Upload CSV File</span>
				</label>
			</form>
		</div>

		<div id="left_panel" style="width:16%;height:80%"
			class="functionpanel-parts commonpanel squarepanel right_left_panel_scroll">
			<label id="table_list_title">Table List</label>
			<br><br>
			<div id="table_container"></div>
			<!--div id="api_container" hidden></div-->
		</div>

		<div id="right_panel" style="width:16%;height:81%"
			class="functionpanel-parts commonpanel squarepanel right_left_panel_scroll">
			<label id="api_list_title">API List</label>
			<br><br>
			<div id="api_container"></div>
		</div>

		<div id="columns" style="width:59%;height:60%" class="functionpanel-parts commonpanel squarepanel itempanel">
			<label id="columns_title"></label>
			<br><br>
			<div name="columns_area" class="item_area"></div>
		</div>

		<!-- tooltip for columns list -->
		<div id="pop-up" class="tooltip">
			<text></text>
		</div>
		<!-- selected columns list area -->
		<div id="container" style="width:59%;height:16%" class="functionpanel-parts commonpanel squarepanel itempanel">
			<div id="genelic_panel" hidden>
				<text name="genelic_text" class="box_text"></text>
				<textarea name="genelic_input" class="user-input"></textarea>
				<!--input type="text" name="genelic_input" class="user-input"></input-->
				<p class="jetelina_subquery_note">writing the sub query is on your own responsibility. I'll check it
					simply.:)</p>
			</div>
		</div>
		<!-- desplya the API test result area-->
		<div id="apitest" style="width:60%;height:15%;top:80%;left:20%;"
			class="functionpanel-parts commonpanel squarepanel" hidden>
			<div name="api-test-msg">
			</div>
			<div name="api-test-data" style="height: 50%;" class="msg_scroll">
			</div>
		</div>
	</div>
	<!--
            condition panel
    -->
	<div id="api_access_numbers" style="top:20%;left:10%" class="functionpanel-parts commonpanel squarepanel" hidden>
		<div><text style="size:a3;color:white;">API Access Numbers</text></div>
		<div id="api_access_numbers_graph">
			<table id="api_access_numbers_list" style="color: aliceblue;">
				<thead>
					<tr>
						<th>apino</th>
						<th>access numbers</th>
						<th>data base</th>
					</tr>
				</thead>
			</table>
		</div>
	</div>
	<div id="plot" style="top:20%;left:50%" class="functionpanel-parts commonpanel squarepanel" hidden>
		<div><text style="size:a3;color:lightgreen;">Rate of DataBase access numbers</text></div>
		<div id="plot_graph"></div>
	</div>

	<div id="performance_real" style="width:50%;height:50%" hidden>
		<div><text style="size:a3;color:white;">SQL Execution Time (sec)</text></div>
		<div id="performance_real_graph"></div>
	</div>
	<div id="performance_test" style="width:30%;height:30%" hidden>
		<div><text style="size:a3;color:red;">TEST SQL Execution Time (sec)</text></div>
		<div id="performance_test_graph"></div>
	</div>
	<!--
			configuration panel
	-->
	<div id="config_panel" style="width:30%;height:30%;top:30%;left:40%;"
		class="commonpanel squarepanel genelic_panel msg_scroll" hidden>
		<label>Server Configuration</label>
		<br><br>
		<div name="config_list">
		</div>
	</div>
	<!--
			something message panels
	-->
	<div id="jetelina_teach_you_smg" class="commonpanel squarepanel genelic_panel jetelina_teach_you" hidden>
		<div name="precious_word" style="text-align: left;" class="box_text"></div>
	</div>
	<div id="something_msg" class="commonpanel squarepanel genelic_panel something_msg_def msg_scroll" hidden>
		<text name="jetelina_message" class="jetelina_message"></text>
		<div id="something_input_field" hidden>
			<text name="something_text" class="box_text"></text>
			<input type="text" name="something_input" class="user-input" autocomplete="off"></input>
		</div>
	</div>
	<!--
			available dataase icons panel
	-->
	<div id="databaselist" class="commonpanel dblist" hidden>
		<span name="postgresql" class="databasename" hidden>
			<img src="jetelina/img/postgresql.png" style="width:60px;height:40px;">
		</span>
		<span name="mysql" class="databasename" hidden>
			<img src="jetelina/img/mysql.png" style="width:40px;height:40px;">
		</span>
		<span name="redis" class="databasename" hidden>
			<img src="jetelina/img/redis.png" style="width:40px;height:40px;">
		</span>
		<span name="mongodb" class="databasename" hidden>
			<img src="jetelina/img/mongodb.png" style="width:40px;height:40px;">
		</span>
	</div>
	<!--
		manual, another word 'help'
	-->
	<div id="guidance" class="functionpanel-parts commonpanel squarepanel" hidden>
		<div style="size:a3;color:#a8ce49;width:80%;height:50%; font-size: large; font-family: sans-serif;">
			This is my current skills.<br>
			<table name="page1" style="margin:auto;text-align:left;">
				<tr>
					<td>
						<pre>
	Hi, I am Jetelina that is your helper to create database tables and WebAPIs that are related with the created database.
	The databases that I can manage so far are PostgreSql, MySql and Redis. Redis is experimental implementation for me, BECAUSE
	I do not know its use cases yet, indeed. :p

	The handling process that I recommend to you is,
		1. you upload your csv data file to me
		2. i create a data base table according to your uploading csv file
		3. you open the created table
		4. you select some columns that you wanna to be data of your WebAPI, this is to be the sql source code
		5. pre-test the sql source code to make confirm
		6. finally create WebAPI is related with the sql
						
		since 6, you can use the created new WebAPI in your web page/application, of course it can be tested on my palm.
		Anyhow let's try it, do not worry I suggest you how to do it.

		Oops, I must tell you something before you use me.
		You command me every your order through our chatbox. Some functions are able to be used by a mouse, but INDEED you will know
		typing is enough to us. Mouse manipulation is old fashion. JUST talk to me. :)
					</pre>
					</td>
				</tr>
				<tr>
					<td style="color: antiquewhite;">
						<pre>
	These are a little bit details, but you can see more detail in jetelina.org site.
					</pre>
					</td>
				</tr>
				<tr>
					<td>
						<pre>
	■Adding using data base
		You maybe will want to use additional database, I mean PostgreSql + Redis, MySql + Redis, PostgreSql + MySql + Redis.
		This is my proudly skill. :)
			1. to make use it, type 'i wanna use postgresql' and so on
			2. I try to connect it, and display its connection parameters if i cannot reach it, plz set the collect parameters and try again

	■Login/Logout
		We always start with 'Hi','Hello' or some greetings. When you wanna login to me, you just type
		your account in my chatbox.
		After you enter in me, you can logout whenever by typing 'logout',,'exit','bye' and so on, but I
		am pleasure if you type 'have a nice day'.
					</pre>
					</td>
				</tr>
				<tr>
					<td style="text-align:center;">
						Page <a href="#" onclick="page(2)">2</a> <a href="#" onclick="page(3)">3</a>
					</td>
				</tr>
			</table>
			<table name="page2" style="margin:auto;text-align:left;" hidden>
				<tr>
					<td>
						<pre>
	■Upload csv file
		Your uploading csv file is to be a origin of created database table.
		The created table is displayed after uploading it.
		The format is very common csv format,
			e.g
				ftest.csv   ← see in 'testdata' directory
				name,sex,age,ave   ← be a table column name
				AAA1,m,10,0.1      ← data
				BBB2,f,20,0.2
						</pre>
						<pre style="color: rgb(230, 89, 8);">
	Attention, the headers (name,sex..) are to be column name, thus you can not use '-' and so on, these are not 
	allowed to use in there depend on a database. In fact, the column name will be named with the file name + header name,
	for example, ftest_name, ftest_sex... in above example. Because I wish every columns are uniquness.
					</pre>
					</td>
				</tr>
				<tr>
					<td>
						<pre>
	■WebAPIs
		Some WebAPIs are created automatically by creating a table, I mean uploading csv file.
		These are displayed on the right side panel. They have a meaning full name,
						
		- created automatically
			'ji': data insert api. I create it automatically by uploading your csv file.
			'ju': data update api. Same above.
			'jd': data delete api. Again.

		- you will create
			'js': data select api. You created.

		try to type its name, for example 'select ji12' or simply 'select 12', it is opened what it is.
		You will see 'IN','OUT' and a sql sentence below. 'IN' and 'OUT' are the WebAPI's I/F, and the sql sentence is the execution in fact. 

	To create 'js' API, 
		1. select table by typing its name, for example, 'select ftest'. 'ftest' is the table name, 'open ftest' can be done as well
		2. select columns, they moves to below, for example 'select age', 'age' is the column. 'select all' is .. you know :)
		3. you can cancel it by typing 'cancel' or 'reject' with the column name, for example 'cancel age, cancel all is 'cancel all'
		4. type 'go subquery' or shortly 'go sub' to move subquery input area to set a subquery phrase if you need, 
			   for example 'where ftest.ftest.age < 30'
		5. to test these setting, you can type 'test api' or 'test sql'...., I execute the sql that is defined by selected items and the subquery
		6. the test result is displayed as same as the 'OUT' I/F format, check it
		7. to create api, simply type 'create api', 
					</pre>
						<pre style="color: rgb(230, 89, 8);">
			BUT ATTENTION, .... to be the next page :)   		
					</pre>
					</td>
				</tr>
				<tr>
					<td style="text-align:center;">
						Page <a href="#" onclick="page(1)">1</a> <a href="#" onclick="page(3)">3</a>
					</td>
				</tr>
			</table>
			<table name="page3" style="margin:auto;text-align:left;" hidden>
				<tr>
					<td>
						<pre>
							</pre>
						<pre style="color: rgb(230, 89, 8);">
		in the case of you set the subquery, its variable parameter must enclosed with '{}', and the rule is following the database 
		I mean, if you tested the api with 'where ftest.ftest_age < 30', and you wanna '30' to be a variable parameter, you must change it {age},
				where ftest.ftest_age < 30    →    where ftest.ftest_age < {age}     ← CAUTION: {age} because 'age' is integer
			in the case of character, for example 'name'
				where ftest.ftest_name = 'AAA' →  where ftest.ftest_name = '{name}'     ← CAUTION: '{name}' because 'name' is character
							</pre>
						<pre>
		To test the created API,
			1. select API's name by typing ..... as same as above 1
			2. type 'test api' or 'check api' and so on
			3. I ask you the input values due to 'IN' I/F, you set the values in out chatbox, then the inputs are replaced in 'IN', look at them
			4. I say to you "..type 'boom'..." or something after all params are set, then you type it
			5. the result is displayed in 'OUT' I/F, confirm it
			6. finally you say 'thank you', 'great'... to me, OK? :)
							</pre>
					</td>
				</tr>
				<tr>
					<td>
						<pre>
	■Managing database table and WebAPIs
		You may wonder how to drop a table and delete api, it's very simple as same as every manipulations.
		1. type 'drop table ftest','ftest' is the table name, and 'delete api js100', 'js100' is the api name
		2. I ask you 'really?' or something, and ask you to let me know your pass phrase only the first time
		3. I drop or delete them by confirming your phrase

		You can only delete 'js' APIs, because it is created by you. Others, 'ji', 'ju','jd' are under my control. These APIs can be 
		deleted by dropping the related table.
			for example,
			    in case, the 'ftest' table has some apis, 'ji100','jd101','ju102','js103','js104'
				'js103' and 'js104' are deletable by you. 'ji100','jd101','ju102' are deletable by dropping 'ftest' table.

		
		Hey, that all. You see what db are you use present on my upper screen.
						</pre>
					</td>
				</tr>
				<tr>
					<td style="text-align:center;">
						Page <a href="#" onclick="page(1)">1</a> <a href="#" onclick="page(2)">2</a>
					</td>
				</tr>
			</table>
		</div>
	</div>
	<!--
		command list, in other word 'help'
	-->
	<div id="command_list" class="functionpanel-parts commonpanel squarepanel" hidden>
		<div style="size:a3;color:lightgreen;width:80%;height:50%;">
			may jetelina.org site help you :)
		</div>
	</div>
	<!--
        Jetelina chat panel
    -->
	<div id="jetelina_panel" class="commonpanel squarepanel" style="width:30%;height:7%;top:40%;left:40%">
		<text name="jetelina_tell" class="box_text"></text>
		<div>
			&nbsp;
		</div>
		<div>
			<text name="your_tell" class="yourText"></text>
			<br>
			<input type="text" name="chat_input" class="user-input" placeholder="always 'guide me' :) "></input>
		</div>
	</div>
</body>
<!-- these libs shoud be here -->
<script type="text/javascript" src="jetelina/js/dashboard.js"></script>
<script type="text/javascript" src="jetelina/js/scenario.js"></script>
<script type="text/javascript" src="jetelina/js/jetelinalib.js"></script>
<script type="text/javascript" src="jetelina/js/initialprocess.js"></script>
<script type="text/javascript" src="jetelina/js/functionpanel.js"></script>
<script type="text/javascript" src="jetelina/js/statspanel.js"></script>
<script type="text/javascript" src="jetelina/js/accountpanel.js"></script>
<script>
	const page = (n) => {
		guidancePageController(n);
	}
</script>

</html>