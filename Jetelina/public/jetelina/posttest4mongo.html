<html>
    <head>
        <script type="text/javascript" src="../js/genie/jquery.min.js"></script>
        <link rel="stylesheet" href="css/dashboard.css">
        <link type="text/css" rel="stylesheet" href="css/tablelist.css">
    </head>
    <body>
        <button onclick="getAjaxData('s')">very simple Select</button>
        <br>
        <button onclick="getAjaxData('i')">data insert</button>
        <br>
        <button onclick="getAjaxData('u')">update</button>
        <br>
        <button onclick="getAjaxData('d')">delete</button>
        <br>
        <div id="apitest">
			<div name="api-test-msg">
			</div>
			<div name="api-test-data">
			</div>
		</div>

        <div>
            <text>Message From Jetelina</text>
            <text id="mfj"></text>
        </div>
        <div id="result" class="functionpanel-parts commonpanel squarepanel" style="color: aliceblue;">
        </div>
    </body>
</html>
<script type="text/javascript">
    const getAjaxData = (s) => {
        let pd = {};
        
        if(s=="s"){
            pd["apino"] = "js89";
        }else if(s=="u"){
           pd["apino"] = "ju87";
           pd["num"] = 123456;
        }else if(s=="i"){
            pd["apino"] = "ji62";           
            let insjsonstr = "{\"j_table\":\"web_ins3\",\"num\":990,\"str\":\"by web api\"}";
            pd["new document"] = JSON.parse(insjsonstr);
        }else if(s=="d"){
            pd["apino"] = "jd88";
        }

        let dd = JSON.stringify(pd);
        console.log("dd is ", dd);

        let url = "http://127.0.0.1:8000/apiactions"
        $.ajax( {
            url: url,
            type: "post",
            data: dd,
            contentType: 'application/json',
            dataType: "json",
        }).done(function(result, textStatus, jqXHR) {
            $(".re").remove();

            if( -1<$.inArray(s,['s'])){
                Object.keys(result).forEach(function (key) {
                if(key=="Jetelina"){
                    $.each(result[key],function (k, v) {
                        vv = JSON.stringify(v);
                        $("#result").append(`<p class="">${vv}</p>`);
                    });
                }
            });

            }else if(-1<$.inArray(s,['i','u','d'])){
                let msg = result["message from Jetelina"]
                $("#result").append(`<p class="">${msg}</p>`);
            }
        }).fail( function( result ){
        }).always(function(result){
        });
    }
</script>